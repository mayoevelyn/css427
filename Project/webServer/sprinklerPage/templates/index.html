<!DOCTYPE html>
<html>
  <head>
    <title>Sprinkler Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" media="screen">
    
    <style type="text/css">
      .container {
        max-width: 500px;
        padding-top: 100px;
      }
    </style>
  </head>
  <body>
    <h2>Zone 1</h2>
    
    <h3>Status</h3>

    <p>Valve is: {{valveState["ValveState"]}}</p>

    <form name="toggleForm" action="{{ url_for('toggleValve') }}" method="post">          
      {{ toggleForm.toggle.label }} {{ toggleForm.toggle }}
      <button name="action" type="submit" value="Submit">Update Valve</button>
    </form>   

    <p>Next scheduled: {{nextScheduled["Day"]}} at {{nextScheduled["Time"]}}
    
    <p>Current Averages</p>
      <ul>
        {% for key, value in currentAverages.items() %}
        <li>{{key}} : {{value}}</li>
        {% endfor %}
      </ul>
      
    <h3>History</h3>
      
      {% for key, value in history.items() %}
        <p>         
        {% for nestedKey, nestedValue in value.items() %}
          {{nestedKey}} : {{nestedValue}}<br/>
        {% endfor %} 
        </p>          
      {% endfor %}
      
    <h3>Sensors</h3>

    <form name="sensorsForm" action="{{ url_for('sensors') }}" method="post">
      <p>
        Temperature
        <ul>
          <li>Reading: {{sensorData["Temperature"]["Reading"]}}C</li>
          <li><div class="input text">
                {{ sensorsForm.temperatureThreshold.label }} {{ sensorsForm.temperatureThreshold(size=1) }}C              
          </li>
        </ul>        
      </p>
      <p>
        Humidity
        <ul>
          <li>Reading: {{sensorData["Humidity"]["Reading"]}}%</li>
          <li><div class="input text">
                {{ sensorsForm.humidityThreshold.label }} {{ sensorsForm.humidityThreshold(size=1) }}%
              </div>
          </li>
        </ul>
      </p>      
      <p>
        Brightness
        <ul>
          <li>Reading: {{sensorData["Brightness"]["Reading"]}}L</li>
          <li><div class="input text">
                {{ sensorsForm.brightnessThreshold.label }} {{ sensorsForm.brightnessThreshold(size=1) }}L
              </div>
          </li>
        </ul>
      </p>      
      <p>
        Moisture
        <ul>
          <li>Reading: {{sensorData["Moisture"]["Reading"]}}%</li>
          <li><div class="input text">
                {{ sensorsForm.moistureThreshold.label }} {{ sensorsForm.moistureThreshold(size=1) }}%
              </div>
          </li>
        </ul>
      </p>
      
      <button name="action" type="submit" value="Submit">Update Sensors</button>
    </form>

    <h3>Preferences</h3>
    
    <form name="preferencesForm" action="{{ url_for('preferences') }}" method="post">          
      <p>Sensor Active Hours<br/>
        {{ preferencesForm.sensorStartTime.label }} {{ preferencesForm.sensorStartTime }}
        {{ preferencesForm.sensorStartAMPM }}
        {{ preferencesForm.sensorEndTime.label }} {{ preferencesForm.sensorEndTime }}
        {{ preferencesForm.sensorEndAMPM }}
      </p>
      <p>Irrigatoin Time<br/>
        {{ preferencesForm.irrigationStartTime.label }} {{ preferencesForm.irrigationStartTime }}
        {{ preferencesForm.irrigationStartAMPM }}
      </p>
      <p>Irrigation Duration<br/>
        {{ preferencesForm.irrigationDuration.label }} {{ preferencesForm.irrigationDuration }}
      </p>

      <button name="action" type="submit" value="Submit">Update Preferences</button><br/><br/>
    </form>    

    <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
  </body>
</html>